import{a as H,r as k,U as M,f as U,cK as V,a2 as X,az as Z,H as G,aq as N,G as J,b8 as $,R as l,k as c,_ as d,ck as Q,S as Y,Z as ee,cm as ae,by as re}from"./index.be43a13b.js";import{u as te,a as ne}from"./useSize.28fc9fbf.js";import{e as oe}from"./eagerComputed.b7d50037.js";var ie=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:Y.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},le=H({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:ie(),slots:["icon"],setup:function(e,S){var P=S.slots,o=S.attrs,m=k(!0),y=k(!1),x=k(1),i=k(null),h=k(null),E=M("avatar",e),p=E.prefixCls,O=te(),n=U(function(){return e.size==="default"?O.value:e.size}),j=V(),u=oe(function(){if(X(e.size)==="object"){var a=Z.find(function(t){return j.value[t]}),r=e.size[a];return r}}),T=function(r){return u.value?{width:"".concat(u.value,"px"),height:"".concat(u.value,"px"),lineHeight:"".concat(u.value,"px"),fontSize:"".concat(r?u.value/2:18,"px")}:{}},v=function(){if(!(!i.value||!h.value)){var r=i.value.offsetWidth,t=h.value.offsetWidth;if(r!==0&&t!==0){var s=e.gap,C=s===void 0?4:s;C*2<t&&(x.value=t-C*2<r?(t-C*2)/r:1)}}},z=function(){var r=e.loadError,t=r==null?void 0:r();t!==!1&&(m.value=!1)};return G(function(){return e.src},function(){N(function(){m.value=!0,x.value=1})}),G(function(){return e.gap},function(){N(function(){v()})}),J(function(){N(function(){v(),y.value=!0})}),function(){var a,r,t=e.shape,s=e.src,C=e.alt,B=e.srcset,w=e.draggable,D=e.crossOrigin,b=$(P,e,"icon"),f=p.value,F=(a={},l(a,"".concat(o.class),!!o.class),l(a,f,!0),l(a,"".concat(f,"-lg"),n.value==="large"),l(a,"".concat(f,"-sm"),n.value==="small"),l(a,"".concat(f,"-").concat(t),t),l(a,"".concat(f,"-image"),s&&m.value),l(a,"".concat(f,"-icon"),b),a),L=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:b?"".concat(n.value/2,"px"):"18px"}:{},W=(r=P.default)===null||r===void 0?void 0:r.call(P),_;if(s&&m.value)_=c("img",{draggable:w,src:s,srcset:B,onError:z,alt:C,crossorigin:D},null);else if(b)_=b;else if(y.value||x.value!==1){var I="scale(".concat(x.value,") translateX(-50%)"),q={msTransform:I,WebkitTransform:I,transform:I},K=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};_=c(Q,{onResize:v},{default:function(){return[c("span",{class:"".concat(f,"-string"),ref:i,style:d(d({},K),q)},[W])]}})}else _=c("span",{class:"".concat(f,"-string"),ref:i,style:{opacity:0}},[W]);return c("span",d(d({},o),{},{ref:h,class:F,style:[L,T(!!b),o.style]}),[_])}}}),A=le,se=function(){return{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"}}},ce=H({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:se(),setup:function(e,S){var P=S.slots,o=S.attrs,m=M("avatar-group",e),y=m.prefixCls,x=m.direction;return ne(e),function(){var i,h=e.maxPopoverPlacement,E=h===void 0?"top":h,p=e.maxCount,O=e.maxStyle,n=e.maxPopoverTrigger,j=n===void 0?"hover":n,u=(i={},l(i,y.value,!0),l(i,"".concat(y.value,"-rtl"),x.value==="rtl"),l(i,"".concat(o.class),!!o.class),i),T=$(P,e),v=ee(T).map(function(t,s){return ae(t,{key:"avatar-key-".concat(s)})}),z=v.length;if(p&&p<z){var a=v.slice(0,p),r=v.slice(p,z);return a.push(c(re,{key:"avatar-popover-key",content:r,trigger:j,placement:E,overlayClassName:"".concat(y.value,"-popover")},{default:function(){return[c(A,{style:O},{default:function(){return["+".concat(z-p)]}})]}})),c("div",d(d({},o),{},{class:u,style:o.style}),[a])}return c("div",d(d({},o),{},{class:u,style:o.style}),[v])}}}),R=ce;A.Group=R;A.install=function(g){return g.component(A.name,A),g.component(R.name,R),g};export{A};
